<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å®ãã˜é«˜é¡å½“é¸å£²å ´ãƒãƒƒãƒ—ã®é–‹ç™ºç§˜è©±ã€‚Leaflet.jsã§ã®åœ°å›³å®Ÿè£…ã€CSVãƒ‡ãƒ¼ã‚¿å‡¦ç†ã€ãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã€Firebase Hostingã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã€å®Ÿéš›ã®é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã‚’è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚">
    <meta name="keywords" content="Leaflet.js,åœ°å›³ã‚¢ãƒ—ãƒª,å®ãã˜,ãƒãƒƒãƒ—é–‹ç™º,JavaScript,Firebase,ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–">
    <title>å®ãã˜é«˜é¡å½“é¸å£²å ´ãƒãƒƒãƒ—ã®é–‹ç™º - åœ°å›³ã‚¢ãƒ—ãƒªå®Ÿè£…ã®å®Ÿè·µ | MechaToraã®ãƒ–ãƒ­ã‚°</title>    <link rel="icon" href="../favicon.svg" type="image/svg+xml">

    <link rel="stylesheet" href="../styles.css">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "å®ãã˜é«˜é¡å½“é¸å£²å ´ãƒãƒƒãƒ—ã®é–‹ç™º",
        "description": "å®ãã˜é«˜é¡å½“é¸å£²å ´ãƒãƒƒãƒ—ã®é–‹ç™ºç§˜è©±ã€‚Leaflet.jsã§ã®åœ°å›³å®Ÿè£…ã€CSVãƒ‡ãƒ¼ã‚¿å‡¦ç†ã€ãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ãªã©ã€å®Ÿéš›ã®é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã‚’è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚",
        "author": {
            "@type": "Person",
            "name": "MechaTora"
        },
        "datePublished": "2025-10-29",
        "dateModified": "2025-10-29",
        "image": "https://blog.mechatora.com/images/lottery-map-dev.jpg",
        "publisher": {
            "@type": "Organization",
            "name": "MechaToraã®ãƒ–ãƒ­ã‚°",
            "logo": {
                "@type": "ImageObject",
                "url": "https://blog.mechatora.com/images/logo.png"
            }
        }
    }
    </script>

    <!-- Google Analytics (æº–å‚™å®Œäº† - GA4æ¸¬å®šIDã‚’è¨­å®šã—ã¦ãã ã•ã„) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XXXXXXXXXX');
    </script> -->

    <!-- ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "ãƒ›ãƒ¼ãƒ ",
                "item": "https://blog.mechatora.com/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "è¨˜äº‹ä¸€è¦§",
                "item": "https://blog.mechatora.com/articles.html"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "å®ãã˜é«˜é¡å½“é¸å£²å ´ãƒãƒƒãƒ—ã®é–‹ç™º - åœ°å›³ã‚¢ãƒ—ãƒªå®Ÿè£…ã®å®Ÿè·µ",
                "item": "https://blog.mechatora.com/articles/lottery-map-development.html"
            }
        ]
    }
    </script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1><a href="../index.html">MechaToraã®ãƒ–ãƒ­ã‚°</a></h1>
        <div class="article-date" style="margin: 1.5rem 0; padding: 1rem; background: var(--bg-secondary); border-left: 4px solid var(--primary-color); font-size: 0.875rem; color: var(--text-secondary);">
            <span style="margin-right: 1rem;">ğŸ“… å…¬é–‹æ—¥: 2025å¹´1æœˆ15æ—¥</span>
            <span>ğŸ”„ æœ€çµ‚æ›´æ–°: 2025å¹´1æœˆ15æ—¥</span>
        </div>

        <div class="article-hero" style="margin: 2rem 0; border-radius: 8px; overflow: hidden;">
            <img src="../images/tech-default.svg" alt="è¨˜äº‹ã®ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒç”»åƒ" style="width: 100%; height: auto; display: block;">
        </div>

            <nav>
                <a href="../index.html">ãƒ›ãƒ¼ãƒ </a>
                <a href="../articles.html">è¨˜äº‹ä¸€è¦§</a>
                <a href="../about.html">é‹å–¶è€…æƒ…å ±</a>
                <a href="../contact.html">ãŠå•ã„åˆã‚ã›</a>
            </nav>
        </div>
    </header>

    <nav class="breadcrumb">
        <a href="../index.html">ãƒ›ãƒ¼ãƒ </a> &gt;
        <a href="../articles.html">è¨˜äº‹ä¸€è¦§</a> &gt;
        <span>å®ãã˜é«˜é¡å½“é¸å£²å ´ãƒãƒƒãƒ—ã®é–‹ç™º</span>
    </nav>

    <main>
        <article>
            <div class="article-header">
                <span class="category tech">æŠ€è¡“ãƒ»é–‹ç™º</span>
                <h1>å®ãã˜é«˜é¡å½“é¸å£²å ´ãƒãƒƒãƒ—ã®é–‹ç™º - åœ°å›³ã‚¢ãƒ—ãƒªå®Ÿè£…ã®å®Ÿè·µ</h1>
                <div class="article-meta">
                    <time datetime="2025-10-29">2025å¹´10æœˆ29æ—¥</time>
                    <span class="reading-time">ğŸ“– ç´„10åˆ†</span>
                </div>
            </div>

            <div class="lead">
                <p>ã€Œé«˜é¡å½“é¸ãŒå‡ºã‚„ã™ã„å®ãã˜å£²å ´ã¯ã©ã“ã ã‚ã†ï¼Ÿã€â€”â€”ãã‚“ãªç–‘å•ã‹ã‚‰å§‹ã¾ã£ãŸã®ãŒã€ã€Œå®ãã˜é«˜é¡å½“é¸å£²å ´ãƒãƒƒãƒ—ã€ã®é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚å…¨å›½ã®å®ãã˜å£²å ´ãƒ‡ãƒ¼ã‚¿ã‚’Googleãƒãƒƒãƒ—é¢¨ã«å¯è¦–åŒ–ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¿‘ãã®å½“é¸å®Ÿç¸¾ãŒã‚ã‚‹å£²å ´ã‚’ç°¡å˜ã«æ¢ã›ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚Šã¾ã—ãŸã€‚</p>
                <p>ã“ã®è¨˜äº‹ã§ã¯ã€Leaflet.jsã‚’ä½¿ã£ãŸåœ°å›³ã‚¢ãƒ—ãƒªã®å®Ÿè£…ã€300ä»¶ä»¥ä¸Šã®å£²å ´ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã€ãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã€Firebase Hostingã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã€é–‹ç™ºã®å…¨ãƒ—ãƒ­ã‚»ã‚¹ã‚’è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚åœ°å›³ã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„æ–¹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚</p>
            </div>

            <h2>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¦‚è¦</h2>

            <h3>é–‹ç™ºã®å‹•æ©Ÿ</h3>
            <p>ãã£ã‹ã‘ã¯ã€å¹´æœ«ã‚¸ãƒ£ãƒ³ãƒœå®ãã˜ã‚’è²·ã†å‰ã«ã€Œã©ã“ã§è²·ã†ã®ãŒã„ã„ã‹ï¼Ÿã€ã¨èª¿ã¹ãŸã“ã¨ã§ã—ãŸã€‚å®ãã˜å…¬å¼ã‚µã‚¤ãƒˆã«ã¯é«˜é¡å½“é¸å£²å ´ã®ãƒªã‚¹ãƒˆã¯ã‚ã‚‹ã‚‚ã®ã®ã€ãƒ†ã‚­ã‚¹ãƒˆã®ç¾…åˆ—ã§éå¸¸ã«è¦‹ã«ãã„ã€‚åœ°å›³ä¸Šã§ä¸€ç›®ã§åˆ†ã‹ã‚‹ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Œã°ä¾¿åˆ©ã ã¨æ€ã„ã€é–‹ç™ºã‚’æ±ºæ„ã—ã¾ã—ãŸã€‚</p>

            <h3>ä¸»ãªæ©Ÿèƒ½</h3>
            <ul>
                <li><strong>åœ°å›³ä¸Šã«å£²å ´ã‚’è¡¨ç¤º</strong>ï¼š300ä»¥ä¸Šã®é«˜é¡å½“é¸å£²å ´ã‚’ãƒãƒ¼ã‚«ãƒ¼è¡¨ç¤º</li>
                <li><strong>ãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°</strong>ï¼šã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã«è¿‘æ¥ãƒãƒ¼ã‚«ãƒ¼ã‚’ã¾ã¨ã‚ã‚‹</li>
                <li><strong>å£²å ´è©³ç´°è¡¨ç¤º</strong>ï¼šã‚¯ãƒªãƒƒã‚¯ã§å½“é¸å®Ÿç¸¾ã€ä½æ‰€ã€å–¶æ¥­æ™‚é–“ã‚’è¡¨ç¤º</li>
                <li><strong>ç¾åœ¨åœ°ã‹ã‚‰æ¤œç´¢</strong>ï¼šGPSæ©Ÿèƒ½ã§æœ€å¯„ã‚Šã®å£²å ´ã‚’è¡¨ç¤º</li>
                <li><strong>éƒ½é“åºœçœŒåˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</strong>ï¼šåœ°åŸŸã‚’çµã£ã¦æ¤œç´¢</li>
            </ul>

            <h3>æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h3>
            <ul>
                <li><strong>åœ°å›³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</strong>ï¼šLeaflet.js</li>
                <li><strong>ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°</strong>ï¼šLeaflet.markercluster</li>
                <li><strong>ãƒ‡ãƒ¼ã‚¿å½¢å¼</strong>ï¼šCSV â†’ JSONå¤‰æ›</li>
                <li><strong>ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°</strong>ï¼šFirebase Hosting</li>
                <li><strong>é–‹ç™ºæœŸé–“</strong>ï¼šç´„2é€±é–“ï¼ˆå®Ÿåƒ20æ™‚é–“ï¼‰</li>
            </ul>

            <h2>ãªãœLeaflet.jsã‚’é¸ã‚“ã ã‹</h2>
        <div style="margin: 1.5rem 0; text-align: center;">
            <img src="../images/tech-default.svg" alt="ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”»åƒ" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        </div>


            <h3>Google Maps API ã¨ã®æ¯”è¼ƒ</h3>
            <table style="width:100%; border-collapse: collapse; margin: 1.5rem 0;">
                <thead>
                    <tr style="background-color: #f3f4f6;">
                        <th style="border: 1px solid #d1d5db; padding: 0.75rem;">é …ç›®</th>
                        <th style="border: 1px solid #d1d5db; padding: 0.75rem;">Google Maps API</th>
                        <th style="border: 1px solid #d1d5db; padding: 0.75rem;">Leaflet.js</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">æ–™é‡‘</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">æœˆ28,000èª­ã¿è¾¼ã¿ã¾ã§ç„¡æ–™<br>è¶…éã§å¾“é‡èª²é‡‘</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">å®Œå…¨ç„¡æ–™</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">å°å…¥</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">APIã‚­ãƒ¼å¿…è¦</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">CDNã§å³åˆ©ç”¨å¯èƒ½</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">â˜…â˜…â˜…â˜†â˜†</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">â˜…â˜…â˜…â˜…â˜…</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">è»½é‡æ€§</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">â˜…â˜…â˜†â˜†â˜†</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">â˜…â˜…â˜…â˜…â˜…</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">æ©Ÿèƒ½</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">â˜…â˜…â˜…â˜…â˜…</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">â˜…â˜…â˜…â˜…â˜†</td>
                    </tr>
                </tbody>
            </table>

            <p>å€‹äººé–‹ç™ºã§ç„¡æ–™é‹ç”¨ã‚’é‡è¦–ã—ãŸãŸã‚ã€Leaflet.jsã‚’é¸æŠã—ã¾ã—ãŸã€‚</p>

            <h3>Leaflet.jsã®ãƒ¡ãƒªãƒƒãƒˆ</h3>
            <ul>
                <li><strong>å®Œå…¨ç„¡æ–™</strong>ï¼šå•†ç”¨åˆ©ç”¨ã‚‚OKã€åˆ¶é™ãªã—</li>
                <li><strong>è»½é‡</strong>ï¼š39KBã®ã¿ï¼ˆGoogle Maps APIã®1/10ä»¥ä¸‹ï¼‰</li>
                <li><strong>ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è±Šå¯Œ</strong>ï¼šã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã€ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ãªã©</li>
                <li><strong>å­¦ç¿’ã‚³ã‚¹ãƒˆä½</strong>ï¼šãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒåˆ†ã‹ã‚Šã‚„ã™ã„</li>
            </ul>

            <h2>é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—1ï¼šåŸºæœ¬çš„ãªåœ°å›³ã®è¡¨ç¤º</h2>

            <h3>Leaflet.jsã®å°å…¥</h3>
            <p>CDNçµŒç”±ã§ç°¡å˜ã«å°å…¥ã§ãã¾ã™ï¼š</p>
            <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" /&gt;
    &lt;script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"&gt;&lt;/script&gt;
    &lt;style&gt;
        #map {
            width: 100%;
            height: 600px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="map"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

            <h3>åœ°å›³ã®åˆæœŸåŒ–</h3>
            <pre><code>// åœ°å›³ã‚’åˆæœŸåŒ–ï¼ˆæ±äº¬é§…ã‚’ä¸­å¿ƒã«è¡¨ç¤ºï¼‰
const map = L.map('map').setView([35.6812, 139.7671], 13);

// ã‚¿ã‚¤ãƒ«å±¤ã‚’è¿½åŠ ï¼ˆOpenStreetMapï¼‰
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    maxZoom: 19
}).addTo(map);</code></pre>

            <p>ã“ã‚Œã ã‘ã§ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªåœ°å›³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼</p>

            <h3>ãƒãƒ¼ã‚«ãƒ¼ã®è¿½åŠ </h3>
            <pre><code>// è¥¿éŠ€åº§ãƒãƒ£ãƒ³ã‚¹ã‚»ãƒ³ã‚¿ãƒ¼ã«ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ 
const marker = L.marker([35.6717, 139.7643]).addTo(map);

// ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¿½åŠ 
marker.bindPopup('&lt;b&gt;è¥¿éŠ€åº§ãƒãƒ£ãƒ³ã‚¹ã‚»ãƒ³ã‚¿ãƒ¼&lt;/b&gt;&lt;br&gt;é«˜é¡å½“é¸å¤šæ•°ï¼');</code></pre>

            <h2>é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—2ï¼šãƒ‡ãƒ¼ã‚¿ã®æº–å‚™ã¨å‡¦ç†</h2>
        <div style="margin: 1.5rem 0; text-align: center;">
            <img src="../images/tech-default.svg" alt="ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”»åƒ" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        </div>


            <h3>ãƒ‡ãƒ¼ã‚¿åé›†</h3>
            <p>å®ãã˜å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰é«˜é¡å½“é¸å£²å ´ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°...ã¨æ€ã„ã¾ã—ãŸãŒã€åˆ©ç”¨è¦ç´„ã§NGã ã£ãŸãŸã‚ã€æ‰‹å‹•ã§CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p>

            <h4>CSVãƒ•ã‚¡ã‚¤ãƒ«ä¾‹ï¼ˆlottery_shops.csvï¼‰</h4>
            <pre><code>name,address,prefecture,lat,lng,wins,notes
è¥¿éŠ€åº§ãƒãƒ£ãƒ³ã‚¹ã‚»ãƒ³ã‚¿ãƒ¼,æ±äº¬éƒ½ä¸­å¤®åŒºéŠ€åº§4-1,æ±äº¬éƒ½,35.6717,139.7643,523,1ç­‰æœ€å¤š
å¤§é˜ªé§…å‰ç¬¬4ãƒ“ãƒ«ç‰¹è¨­å£²å ´,å¤§é˜ªåºœå¤§é˜ªå¸‚åŒ—åŒºæ¢…ç”°1-11-4,å¤§é˜ªåºœ,34.7024,135.4959,312,è¿‘ç•¿æœ€å¤š
åé§…å‰ãƒãƒ£ãƒ³ã‚¹ã‚»ãƒ³ã‚¿ãƒ¼,æ„›çŸ¥çœŒåå¤å±‹å¸‚ä¸­æ‘åŒºåé§…1-1-4,æ„›çŸ¥çœŒ,35.1706,136.8816,187,ä¸­éƒ¨æœ€å¤š</code></pre>

            <h3>CSVã‚’JSONã«å¤‰æ›</h3>
            <p>Excelã§ç·¨é›†ã—ã‚„ã™ã„CSVã§ç®¡ç†ã—ã€JavaScriptã§JSONã«å¤‰æ›ï¼š</p>
            <pre><code>// Papa Parse ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ï¼ˆCDNçµŒç”±ï¼‰
// &lt;script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"&gt;&lt;/script&gt;

Papa.parse('lottery_shops.csv', {
    download: true,
    header: true,
    complete: function(results) {
        const shops = results.data;
        addMarkersToMap(shops);
    }
});</code></pre>

            <h3>è¤‡æ•°ãƒãƒ¼ã‚«ãƒ¼ã®è¿½åŠ </h3>
            <pre><code>function addMarkersToMap(shops) {
    shops.forEach(shop => {
        // åº§æ¨™ãŒæœ‰åŠ¹ãªå ´åˆã®ã¿ãƒãƒ¼ã‚«ãƒ¼è¿½åŠ 
        if (shop.lat && shop.lng) {
            const marker = L.marker([parseFloat(shop.lat), parseFloat(shop.lng)])
                .addTo(map);

            // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å†…å®¹
            const popupContent = `
                &lt;div class="shop-popup"&gt;
                    &lt;h3&gt;${shop.name}&lt;/h3&gt;
                    &lt;p&gt;&lt;strong&gt;ä½æ‰€:&lt;/strong&gt; ${shop.address}&lt;/p&gt;
                    &lt;p&gt;&lt;strong&gt;é«˜é¡å½“é¸:&lt;/strong&gt; ${shop.wins}å›&lt;/p&gt;
                    &lt;p&gt;${shop.notes}&lt;/p&gt;
                &lt;/div&gt;
            `;

            marker.bindPopup(popupContent);
        }
    });
}</code></pre>

            <h2>é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—3ï¼šãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°</h2>

            <h3>å•é¡Œï¼šãƒãƒ¼ã‚«ãƒ¼ãŒå¤šã™ãã¦è¦‹ã¥ã‚‰ã„</h3>
            <p>300å€‹ä»¥ä¸Šã®ãƒãƒ¼ã‚«ãƒ¼ã‚’å…¨ã¦è¡¨ç¤ºã™ã‚‹ã¨ã€åœ°å›³ãŒãƒãƒ¼ã‚«ãƒ¼ã ã‚‰ã‘ã§éå¸¸ã«è¦‹ã¥ã‚‰ããªã‚Šã¾ã—ãŸã€‚ç‰¹ã«æ±äº¬éƒ½å†…ã¯å£²å ´ãŒå¯†é›†ã—ã¦ãŠã‚Šã€ãƒãƒ¼ã‚«ãƒ¼ãŒé‡ãªã£ã¦å€‹åˆ¥ã«ã‚¯ãƒªãƒƒã‚¯ã§ãã¾ã›ã‚“ã€‚</p>

            <h3>è§£æ±ºç­–ï¼šLeaflet.markercluster</h3>
            <p>ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ã¦ã€è¿‘æ¥ã™ã‚‹ãƒãƒ¼ã‚«ãƒ¼ã‚’è‡ªå‹•çš„ã«ã¾ã¨ã‚ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°å…¥ï¼š</p>
            <pre><code>&lt;!-- CDN ã§ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’èª­ã¿è¾¼ã¿ --&gt;
&lt;link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" /&gt;
&lt;link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" /&gt;
&lt;script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"&gt;&lt;/script&gt;</code></pre>

            <h3>ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã®å®Ÿè£…</h3>
            <pre><code>// ãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆ
const markers = L.markerClusterGroup({
    // ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
    iconCreateFunction: function(cluster) {
        const count = cluster.getChildCount();
        let size = 'small';
        if (count > 100) size = 'large';
        else if (count > 20) size = 'medium';

        return L.divIcon({
            html: `&lt;div&gt;&lt;span&gt;${count}&lt;/span&gt;&lt;/div&gt;`,
            className: 'marker-cluster marker-cluster-' + size,
            iconSize: L.point(40, 40)
        });
    },
    // æœ€å¤§ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ï¼ˆã“ã‚Œä»¥ä¸Šæ‹¡å¤§ã™ã‚‹ã¨ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼è§£é™¤ï¼‰
    disableClusteringAtZoom: 18
});

// ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã«è¿½åŠ 
shops.forEach(shop => {
    if (shop.lat && shop.lng) {
        const marker = L.marker([parseFloat(shop.lat), parseFloat(shop.lng)]);
        marker.bindPopup(createPopupContent(shop));
        markers.addLayer(marker);
    }
});

// ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã‚’åœ°å›³ã«è¿½åŠ 
map.addLayer(markers);</code></pre>

            <h3>ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°</h3>
            <pre><code>.marker-cluster {
    background-color: rgba(37, 99, 235, 0.6);
    border-radius: 50%;
    text-align: center;
    color: white;
    font-weight: bold;
}

.marker-cluster-small {
    width: 40px;
    height: 40px;
}

.marker-cluster-medium {
    width: 50px;
    height: 50px;
    background-color: rgba(234, 88, 12, 0.6);
}

.marker-cluster-large {
    width: 60px;
    height: 60px;
    background-color: rgba(220, 38, 38, 0.6);
}</code></pre>

            <p>ã“ã‚Œã«ã‚ˆã‚Šã€ã‚ºãƒ¼ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã¯ã€Œæ±äº¬éƒ½: 85ä»¶ã€ã®ã‚ˆã†ã«ã¾ã¨ã‚ã¦è¡¨ç¤ºã•ã‚Œã€ã‚ºãƒ¼ãƒ ã‚¤ãƒ³ã™ã‚‹ã¨å€‹åˆ¥ã®ãƒãƒ¼ã‚«ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>

            <h2>é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—4ï¼šæ¤œç´¢ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½</h2>

            <h3>éƒ½é“åºœçœŒåˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h3>
            <pre><code>// HTMLã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹
&lt;select id="prefecture-filter"&gt;
    &lt;option value=""&gt;å…¨å›½&lt;/option&gt;
    &lt;option value="æ±äº¬éƒ½"&gt;æ±äº¬éƒ½&lt;/option&gt;
    &lt;option value="å¤§é˜ªåºœ"&gt;å¤§é˜ªåºœ&lt;/option&gt;
    &lt;!-- ... ãã®ä»–ã®éƒ½é“åºœçœŒ --&gt;
&lt;/select&gt;

// JavaScript
document.getElementById('prefecture-filter').addEventListener('change', (e) => {
    const selectedPref = e.target.value;

    // æ—¢å­˜ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒªã‚¢
    markers.clearLayers();

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦å†è¿½åŠ 
    const filteredShops = selectedPref
        ? shops.filter(shop => shop.prefecture === selectedPref)
        : shops;

    filteredShops.forEach(shop => {
        if (shop.lat && shop.lng) {
            const marker = L.marker([parseFloat(shop.lat), parseFloat(shop.lng)]);
            marker.bindPopup(createPopupContent(shop));
            markers.addLayer(marker);
        }
    });

    // é¸æŠã•ã‚ŒãŸåœ°åŸŸã«åœ°å›³ã‚’ç§»å‹•
    if (selectedPref && filteredShops.length > 0) {
        const bounds = L.latLngBounds(
            filteredShops.map(shop => [parseFloat(shop.lat), parseFloat(shop.lng)])
        );
        map.fitBounds(bounds);
    }
});</code></pre>

            <h3>ç¾åœ¨åœ°ã‹ã‚‰æœ€å¯„ã‚Šã®å£²å ´ã‚’æ¢ã™</h3>
            <pre><code>document.getElementById('find-nearby').addEventListener('click', () => {
    if (!navigator.geolocation) {
        alert('ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ä½ç½®æƒ…å ±ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“');
        return;
    }

    navigator.geolocation.getCurrentPosition(
        (position) => {
            const userLat = position.coords.latitude;
            const userLng = position.coords.longitude;

            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½ç½®ã«ãƒãƒ¼ã‚«ãƒ¼è¿½åŠ 
            L.marker([userLat, userLng], {
                icon: L.icon({
                    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
                    iconSize: [25, 41],
                    iconAnchor: [12, 41]
                })
            }).addTo(map).bindPopup('ç¾åœ¨åœ°').openPopup();

            // åœ°å›³ã‚’ç¾åœ¨åœ°ã«ç§»å‹•
            map.setView([userLat, userLng], 14);

            // æœ€å¯„ã‚Šã®å£²å ´ã‚’è¨ˆç®—
            const nearest = findNearestShop(userLat, userLng, shops);
            if (nearest) {
                alert(`æœ€å¯„ã‚Šã®é«˜é¡å½“é¸å£²å ´: ${nearest.name}ï¼ˆç´„${nearest.distance.toFixed(1)}kmï¼‰`);
            }
        },
        (error) => {
            alert('ä½ç½®æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
        }
    );
});

function findNearestShop(userLat, userLng, shops) {
    let nearestShop = null;
    let minDistance = Infinity;

    shops.forEach(shop => {
        if (shop.lat && shop.lng) {
            const distance = calculateDistance(
                userLat, userLng,
                parseFloat(shop.lat), parseFloat(shop.lng)
            );

            if (distance < minDistance) {
                minDistance = distance;
                nearestShop = { ...shop, distance };
            }
        }
    });

    return nearestShop;
}

// Haversineå…¬å¼ã§2ç‚¹é–“ã®è·é›¢ã‚’è¨ˆç®—ï¼ˆkmï¼‰
function calculateDistance(lat1, lon1, lat2, lon2) {
    const R = 6371; // åœ°çƒã®åŠå¾„ï¼ˆkmï¼‰
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLon = (lon2 - lon1) * Math.PI / 180;

    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
              Math.sin(dLon / 2) * Math.sin(dLon / 2);

    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
}</code></pre>

            <h2>é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—5ï¼šFirebase Hostingã§ãƒ‡ãƒ—ãƒ­ã‚¤</h2>

            <h3>Firebase Hostingã‚’é¸ã‚“ã ç†ç”±</h3>
            <ul>
                <li><strong>ç„¡æ–™</strong>ï¼šæœˆ10GBã¾ã§ç„¡æ–™ï¼ˆå€‹äººé–‹ç™ºã«ã¯ååˆ†ï¼‰</li>
                <li><strong>HTTPSè‡ªå‹•</strong>ï¼šSSLè¨¼æ˜æ›¸ãŒè‡ªå‹•ã§è¨­å®šã•ã‚Œã‚‹</li>
                <li><strong>é«˜é€Ÿ</strong>ï¼šCDNçµŒç”±ã§é…ä¿¡</li>
                <li><strong>ç°¡å˜</strong>ï¼šCLIã‚³ãƒãƒ³ãƒ‰1ã¤ã§ãƒ‡ãƒ—ãƒ­ã‚¤</li>
            </ul>

            <h3>ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †</h3>
            <pre><code># 1. Firebase CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g firebase-tools

# 2. Firebaseã«ãƒ­ã‚°ã‚¤ãƒ³
firebase login

# 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆæœŸåŒ–
firebase init hosting

# è³ªå•ã«å›ç­”:
# - Use an existing project â†’ æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠï¼ˆã¾ãŸã¯æ–°è¦ä½œæˆï¼‰
# - What do you want to use as your public directory? â†’ public
# - Configure as a single-page app? â†’ No
# - Set up automatic builds and deploys with GitHub? â†’ No

# 4. HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’publicãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®

# 5. ãƒ‡ãƒ—ãƒ­ã‚¤
firebase deploy

# ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ï¼ https://your-project.web.app/ ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</code></pre>

            <h2>è‹¦åŠ´ã—ãŸç‚¹ã¨è§£æ±ºç­–</h2>

            <h3>1. ç·¯åº¦çµŒåº¦ã®å–å¾—</h3>
            <p><strong>å•é¡Œ</strong>ï¼šå£²å ´ã®ä½æ‰€ã‹ã‚‰ç·¯åº¦çµŒåº¦ã‚’æ‰‹å‹•ã§èª¿ã¹ã‚‹ã®ãŒå¤§å¤‰ï¼ˆ300ä»¶ä»¥ä¸Šï¼‰</p>
            <p><strong>è§£æ±ºç­–</strong>ï¼šGoogle Geocoding APIã§ä¸€æ‹¬å¤‰æ›</p>
            <pre><code>// Node.jsã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä¸€æ‹¬å¤‰æ›
const axios = require('axios');
const fs = require('fs');

async function geocodeAddress(address) {
    const API_KEY = 'YOUR_GOOGLE_API_KEY';
    const url = `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(address)}&key=${API_KEY}`;

    const response = await axios.get(url);
    if (response.data.results.length > 0) {
        const location = response.data.results[0].geometry.location;
        return { lat: location.lat, lng: location.lng };
    }
    return null;
}

// CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ç·¯åº¦çµŒåº¦ã‚’è¿½åŠ 
// ï¼ˆå®Ÿè£…ã¯çœç•¥ï¼‰</code></pre>

            <h3>2. ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ</h3>
            <p><strong>å•é¡Œ</strong>ï¼šã‚¹ãƒãƒ›ã§è¦‹ã‚‹ã¨ãƒãƒ¼ã‚«ãƒ¼ãŒå°ã•ãã¦ã‚¿ãƒƒãƒ—ã—ã«ãã„</p>
            <p><strong>è§£æ±ºç­–</strong>ï¼šãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ + ã‚¿ãƒƒãƒæœ€é©åŒ–</p>
            <pre><code>/* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
@media (max-width: 768px) {
    #map {
        height: 400px; /* PC: 600px â†’ ã‚¹ãƒãƒ›: 400px */
    }

    .leaflet-popup-content {
        font-size: 14px;
        max-width: 250px;
    }

    /* ãƒãƒ¼ã‚«ãƒ¼ã‚’å°‘ã—å¤§ãã */
    .leaflet-marker-icon {
        transform: scale(1.2);
    }
}</code></pre>

            <h3>3. èª­ã¿è¾¼ã¿é€Ÿåº¦</h3>
            <p><strong>å•é¡Œ</strong>ï¼š300ä»¶ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’ä¸€åº¦ã«èª­ã¿è¾¼ã‚€ã¨é…ã„</p>
            <p><strong>è§£æ±ºç­–</strong>ï¼šé…å»¶èª­ã¿è¾¼ã¿ + ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°</p>
            <ul>
                <li>åˆæœŸè¡¨ç¤ºã¯ç¾åœ¨ã®ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå†…ã®ãƒãƒ¼ã‚«ãƒ¼ã®ã¿</li>
                <li>åœ°å›³ç§»å‹•æ™‚ã«è¿½åŠ èª­ã¿è¾¼ã¿</li>
                <li>ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã§æç”»è² è·ã‚’è»½æ¸›</li>
            </ul>

            <h2>ã¾ã¨ã‚</h2>

            <h3>é–‹ç™ºã§å­¦ã‚“ã ã“ã¨</h3>
            <ol>
                <li><strong>Leaflet.jsã¯å€‹äººé–‹ç™ºã«æœ€é©</strong>ï¼šç„¡æ–™ã€è»½é‡ã€ç°¡å˜</li>
                <li><strong>ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ã¯å¿…é ˆ</strong>ï¼š100ä»¶ä»¥ä¸Šã®ãƒãƒ¼ã‚«ãƒ¼ã«ã¯å¿…é ˆæ©Ÿèƒ½</li>
                <li><strong>ãƒ‡ãƒ¼ã‚¿æ•´å‚™ãŒé‡è¦</strong>ï¼šç·¯åº¦çµŒåº¦ã®ç²¾åº¦ãŒUXã‚’å·¦å³ã™ã‚‹</li>
                <li><strong>Firebase Hostingã¯ä¾¿åˆ©</strong>ï¼šç„¡æ–™ã§HTTPSã€CDNã€è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤</li>
            </ol>

            <h3>ä»Šå¾Œã®æ”¹å–„äºˆå®š</h3>
            <ul>
                <li>å½“é¸å®Ÿç¸¾ã®ã‚°ãƒ©ãƒ•è¡¨ç¤ºï¼ˆChart.jsï¼‰</li>
                <li>ãƒ«ãƒ¼ãƒˆæ¤œç´¢æ©Ÿèƒ½ï¼ˆæœ€å¯„ã‚Šé§…ã‹ã‚‰ã®ãƒ«ãƒ¼ãƒˆï¼‰</li>
                <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½</li>
                <li>å¹´æœ«ã‚¸ãƒ£ãƒ³ãƒœãªã©ã‚¤ãƒ™ãƒ³ãƒˆæ™‚ã®æ··é›‘äºˆæ¸¬</li>
            </ul>

            <p>åœ°å›³ã‚¢ãƒ—ãƒªã¯ã€ãƒ‡ãƒ¼ã‚¿ã•ãˆã‚ã‚Œã°æ¯”è¼ƒçš„ç°¡å˜ã«ä½œã‚Œã¾ã™ã€‚Leaflet.jsã‚’ä½¿ãˆã°ã€Google Maps APIã®ã‚ˆã†ãªã‚³ã‚¹ãƒˆã‚’æ°—ã«ã›ãšã€è‡ªç”±ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚ãœã²ã€ã‚ãªãŸã‚‚ä½•ã‹åœ°å›³ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ã¦ãã ã•ã„ï¼</p>

            <div class="related-articles">
                <h3>é–¢é€£è¨˜äº‹</h3>
                <ul>
                    <li><a href="earthquake-monitor-tech.html">åœ°éœ‡ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªã®é–‹ç™º</a></li>
                    <li><a href="cook-suggest-development.html">æ–™ç†ææ¡ˆã‚¢ãƒ—ãƒªã®é–‹ç™ºç§˜è©±</a></li>
                    <li><a href="qualification-calendar-dev.html">è³‡æ ¼è©¦é¨“ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®é–‹ç™º</a></li>
                    <li><a href="pwa-implementation-guide.html">PWAå®Ÿè£…ã®åŸºç¤</a></li>
                </ul>
            </div>
        </article>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="../index.html">ãƒ›ãƒ¼ãƒ </a>
                <a href="../articles.html">è¨˜äº‹ä¸€è¦§</a>
                <a href="../about.html">é‹å–¶è€…æƒ…å ±</a>
                <a href="../privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
                <a href="../contact.html">ãŠå•ã„åˆã‚ã›</a>
            </div>
            <p>&copy; 2025 MechaToraã®ãƒ–ãƒ­ã‚°. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // ç›®æ¬¡ã‚’è‡ªå‹•ç”Ÿæˆ
        document.addEventListener('DOMContentLoaded', function() {
            const article = document.querySelector('article');
            if (!article) return;

            const headings = article.querySelectorAll('h2');
            if (headings.length < 2) return;

            let tocHTML = '<div class="table-of-contents" style="margin: 2rem 0; padding: 1.5rem; background: var(--bg-secondary); border-radius: 8px;"><h3 style="margin: 0 0 1rem 0; font-size: 1.125rem;">ğŸ“‘ ç›®æ¬¡</h3><ul style="margin: 0; padding-left: 1.5rem; line-height: 2;">';

            headings.forEach((heading, index) => {
                const id = `section-${index}`;
                heading.id = id;
                tocHTML += `<li><a href="#${id}" style="color: var(--primary-color); text-decoration: none;">${heading.textContent}</a></li>`;
            });

            tocHTML += '</ul></div>';

            const firstH2 = article.querySelector('h2');
            if (firstH2) {
                firstH2.insertAdjacentHTML('beforebegin', tocHTML);
            }
        });
    </script>
    <script src="../cookie-banner.js"></script>
</body>
</html>