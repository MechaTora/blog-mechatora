<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Rè¨€èªã¨Tidyverseã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ï¼ˆãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ï¼‰ã®å®Ÿè·µã‚¬ã‚¤ãƒ‰ã€‚æ¬ æå€¤å‡¦ç†ã€é‡è¤‡å‰Šé™¤ã€å‹å¤‰æ›ã€å¤–ã‚Œå€¤é™¤å»ãªã©ã€äººäº‹ãƒ‡ãƒ¼ã‚¿ã®å®Ÿä¾‹ã§è§£èª¬ã—ã¾ã™ã€‚">
    <meta name="keywords" content="ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°,ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†,Tidyverse,dplyr,Rè¨€èª,æ¬ æå€¤,ãƒ‡ãƒ¼ã‚¿åˆ†æ">
    <title>Tidyverseã§å§‹ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚° - æ±šã„ãƒ‡ãƒ¼ã‚¿ã‚’ç¶ºéº—ã«ã™ã‚‹æ–¹æ³• | MechaToraã®ãƒ–ãƒ­ã‚°</title>    <link rel="icon" href="../favicon.svg" type="image/svg+xml">

    <link rel="stylesheet" href="../styles.css">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "Tidyverseã§å§‹ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°",
        "description": "Rè¨€èªã¨Tidyverseã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã®å®Ÿè·µã‚¬ã‚¤ãƒ‰ã€‚æ¬ æå€¤å‡¦ç†ã€é‡è¤‡å‰Šé™¤ã€å‹å¤‰æ›ã€å¤–ã‚Œå€¤é™¤å»ãªã©ã€äººäº‹ãƒ‡ãƒ¼ã‚¿ã®å®Ÿä¾‹ã§è§£èª¬ã—ã¾ã™ã€‚",
        "author": {
            "@type": "Person",
            "name": "MechaTora"
        },
        "datePublished": "2025-10-31",
        "dateModified": "2025-10-31",
        "image": "https://blog.mechatora.com/images/data-cleaning.jpg",
        "publisher": {
            "@type": "Organization",
            "name": "MechaToraã®ãƒ–ãƒ­ã‚°",
            "logo": {
                "@type": "ImageObject",
                "url": "https://blog.mechatora.com/images/logo.png"
            }
        }
    }
    </script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1><a href="../index.html">MechaToraã®ãƒ–ãƒ­ã‚°</a></h1>
            <nav>
                <a href="../index.html">ãƒ›ãƒ¼ãƒ </a>
                <a href="../articles.html">è¨˜äº‹ä¸€è¦§</a>
                <a href="../about.html">é‹å–¶è€…æƒ…å ±</a>
                <a href="../contact.html">ãŠå•ã„åˆã‚ã›</a>
            </nav>
        </div>
    </header>

    <nav class="breadcrumb">
        <a href="../index.html">ãƒ›ãƒ¼ãƒ </a> &gt;
        <a href="../articles.html">è¨˜äº‹ä¸€è¦§</a> &gt;
        <span>Tidyverseã§å§‹ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°</span>
    </nav>

    <main>
        <article>
            <div class="article-header">
                <span class="category datascience">ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹</span>
                <h1>Tidyverseã§å§‹ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚° - æ±šã„ãƒ‡ãƒ¼ã‚¿ã‚’ç¶ºéº—ã«ã™ã‚‹æ–¹æ³•</h1>
                <div class="article-meta">
                    <time datetime="2025-10-31">2025å¹´10æœˆ31æ—¥</time>
                    <span class="reading-time">ğŸ“– ç´„10åˆ†</span>
                </div>
            </div>

            <div class="lead">
                <p>ãƒ‡ãƒ¼ã‚¿åˆ†æã®8å‰²ã¯ã€Œãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ï¼ˆãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ï¼‰ã€ã ã¨è¨€ã‚ã‚Œã¾ã™ã€‚å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã¯ã€æ¬ æå€¤ã€é‡è¤‡ã€è¡¨è¨˜ã‚†ã‚Œã€å¤–ã‚Œå€¤ãªã©ã€æ§˜ã€…ãªã€Œæ±šã‚Œã€ã‚’å«ã‚“ã§ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ç¶ºéº—ã«ã—ãªã„ã¨ã€æ­£ç¢ºãªåˆ†æã¯ã§ãã¾ã›ã‚“ã€‚</p>
                <p>ã“ã®è¨˜äº‹ã§ã¯ã€Rè¨€èªã®Tidyverseã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã®å®Ÿè·µæ–¹æ³•ã‚’ã€äººäº‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¾‹ã«è§£èª¬ã—ã¾ã™ã€‚æ¬ æå€¤ã®å‡¦ç†ã€é‡è¤‡ã®å‰Šé™¤ã€å‹å¤‰æ›ã€å¤–ã‚Œå€¤ã®é™¤å»ãªã©ã€å®Ÿå‹™ã§å¿…ãšä½¿ã†æ‰‹æ³•ã‚’ç¶²ç¾…ã—ã¾ã™ã€‚</p>
            </div>

            <h2>ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã¨ã¯</h2>

            <h3>ãƒ‡ãƒ¼ã‚¿åˆ†æã®æµã‚Œ</h3>
            <ol>
                <li><strong>ãƒ‡ãƒ¼ã‚¿åé›†</strong>ï¼šExcelãƒ•ã‚¡ã‚¤ãƒ«ã‚„DBã‹ã‚‰å–å¾—</li>
                <li><strong>ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°</strong>ï¼šæ±šã‚Œã‚’é™¤å»ï¼ˆå…¨ä½“ã®70ã€œ80%ï¼‰</li>
                <li><strong>æ¢ç´¢çš„ãƒ‡ãƒ¼ã‚¿åˆ†æï¼ˆEDAï¼‰</strong>ï¼šå¯è¦–åŒ–ã—ã¦å‚¾å‘ã‚’æ¢ã‚‹</li>
                <li><strong>ãƒ¢ãƒ‡ãƒªãƒ³ã‚°</strong>ï¼šçµ±è¨ˆåˆ†æã‚„æ©Ÿæ¢°å­¦ç¿’</li>
                <li><strong>ãƒ¬ãƒãƒ¼ãƒ†ã‚£ãƒ³ã‚°</strong>ï¼šçµæœã‚’å…±æœ‰</li>
            </ol>

            <h3>ã‚ˆãã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å•é¡Œ</h3>
            <p>äººäº‹éƒ¨ã‹ã‚‰å—ã‘å–ã£ãŸç¤¾å“¡ãƒ‡ãƒ¼ã‚¿ã®ä¾‹ï¼š</p>
            <pre><code>employee_id,name,age,department,salary,join_date
001,å±±ç”°å¤ªéƒ,32,å–¶æ¥­éƒ¨,5000000,2020-04-01
002,ä½è—¤èŠ±å­,28,é–‹ç™ºéƒ¨,4500000,2021-06-15
003,ç”°ä¸­ä¸€éƒ,999,äººäº‹éƒ¨,4800000,2019-10-01  # å¹´é½¢ãŒæ˜ã‚‰ã‹ã«ç•°å¸¸
004,å±±ç”°å¤ªéƒ,32,å–¶æ¥­éƒ¨,5000000,2020-04-01  # 001ã¨é‡è¤‡
005,éˆ´æœ¨æ¬¡éƒ,,å–¶æ¥­éƒ¨,4200000,2022-01-10  # å¹´é½¢ãŒæ¬ æ
006,é«˜æ©‹ä¸‰éƒ,45,é–‹ç™º,5500000,2018-05-20  # ã€Œé–‹ç™ºéƒ¨ã€ã§ã¯ãªãã€Œé–‹ç™ºã€
007,ä¼Šè—¤å››éƒ,38,å–¶æ¥­éƒ¨,,2020-08-01  # çµ¦ä¸ãŒæ¬ æ
008,æ¸¡è¾ºäº”éƒ,29,äººäº‹éƒ¨,4900000,2021/03/15  # æ—¥ä»˜ã®å½¢å¼ãŒç•°ãªã‚‹</code></pre>

            <p>ã“ã®ãƒ‡ãƒ¼ã‚¿ã«ã¯ã€ä»¥ä¸‹ã®å•é¡ŒãŒã‚ã‚Šã¾ã™ï¼š</p>
            <ul>
                <li><strong>é‡è¤‡ãƒ‡ãƒ¼ã‚¿</strong>ï¼š001ã¨004ãŒåŒã˜</li>
                <li><strong>æ¬ æå€¤</strong>ï¼š005ã®å¹´é½¢ã€007ã®çµ¦ä¸</li>
                <li><strong>å¤–ã‚Œå€¤</strong>ï¼š003ã®å¹´é½¢999æ­³</li>
                <li><strong>è¡¨è¨˜ã‚†ã‚Œ</strong>ï¼šã€Œé–‹ç™ºéƒ¨ã€ã¨ã€Œé–‹ç™ºã€</li>
                <li><strong>æ—¥ä»˜å½¢å¼ã®ä¸çµ±ä¸€</strong>ï¼š2020-04-01ã¨2021/03/15</li>
            </ul>

            <h2>æº–å‚™ï¼šTidyverseã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

            <pre><code># Tidyverseã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
install.packages("tidyverse")

# ãƒ©ã‚¤ãƒ–ãƒ©ãƒªèª­ã¿è¾¼ã¿
library(tidyverse)</code></pre>

            <h2>ã‚¹ãƒ†ãƒƒãƒ—1ï¼šãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã¨ç¢ºèª</h2>

            <h3>CSVãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿</h3>
            <pre><code># readr ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® read_csv() ã‚’ä½¿ç”¨
employee_data <- read_csv("employee_data.csv")

# ãƒ‡ãƒ¼ã‚¿ã®æœ€åˆã®6è¡Œã‚’è¡¨ç¤º
head(employee_data)

# ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ ã‚’ç¢ºèª
glimpse(employee_data)

# å‡ºåŠ›ä¾‹:
# Rows: 100
# Columns: 6
# $ employee_id <chr> "001", "002", "003", ...
# $ name        <chr> "å±±ç”°å¤ªéƒ", "ä½è—¤èŠ±å­", ...
# $ age         <dbl> 32, 28, 999, ...
# $ department  <chr> "å–¶æ¥­éƒ¨", "é–‹ç™ºéƒ¨", ...
# $ salary      <dbl> 5000000, 4500000, ...
# $ join_date   <chr> "2020-04-01", "2021-06-15", ...</code></pre>

            <h3>åŸºæœ¬çµ±è¨ˆé‡ã®ç¢ºèª</h3>
            <pre><code># å„åˆ—ã®çµ±è¨ˆé‡
summary(employee_data)

# æ¬ æå€¤ã®æ•°
employee_data %>%
  summarise(across(everything(), ~sum(is.na(.))))

# å‡ºåŠ›ä¾‹:
# employee_id  name  age  department  salary  join_date
#           0     0    5           2      12          0</code></pre>

            <h2>ã‚¹ãƒ†ãƒƒãƒ—2ï¼šé‡è¤‡ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤</h2>

            <h3>å®Œå…¨ä¸€è‡´ã™ã‚‹é‡è¤‡</h3>
            <pre><code># é‡è¤‡è¡Œã‚’å‰Šé™¤ï¼ˆå…¨ã¦ã®åˆ—ãŒä¸€è‡´ï¼‰
employee_data <- employee_data %>%
  distinct()

# å‰Šé™¤å‰å¾Œã®è¡Œæ•°ã‚’ç¢ºèª
nrow(employee_data)  # 95è¡Œï¼ˆ5è¡Œã®é‡è¤‡ã‚’å‰Šé™¤ï¼‰</code></pre>

            <h3>ç‰¹å®šåˆ—ã§ã®é‡è¤‡</h3>
            <pre><code># employee_id ãŒé‡è¤‡ã—ã¦ã„ã‚‹è¡Œã‚’å‰Šé™¤ï¼ˆæœ€åˆã®è¡Œã‚’æ®‹ã™ï¼‰
employee_data <- employee_data %>%
  distinct(employee_id, .keep_all = TRUE)

# ã©ã®è¡ŒãŒé‡è¤‡ã—ã¦ã„ãŸã‹ã‚’ç¢ºèª
employee_data %>%
  group_by(employee_id) %>%
  filter(n() > 1)</code></pre>

            <h2>ã‚¹ãƒ†ãƒƒãƒ—3ï¼šæ¬ æå€¤ã®å‡¦ç†</h2>

            <h3>æ¬ æå€¤ã®ç¢ºèª</h3>
            <pre><code># åˆ—ã”ã¨ã®æ¬ æå€¤æ•°ã¨å‰²åˆ
employee_data %>%
  summarise(across(everything(), list(
    missing = ~sum(is.na(.)),
    pct = ~mean(is.na(.)) * 100
  )))

# å‡ºåŠ›ä¾‹:
# age_missing  age_pct  salary_missing  salary_pct
#           5    5.26%              12       12.6%</code></pre>

            <h3>æ¬ æå€¤ã®å‰Šé™¤</h3>
            <pre><code># æ¬ æå€¤ã‚’å«ã‚€è¡Œã‚’å…¨ã¦å‰Šé™¤
employee_data_complete <- employee_data %>%
  drop_na()

# ç‰¹å®šã®åˆ—ã®æ¬ æå€¤ã®ã¿å‰Šé™¤
employee_data_clean <- employee_data %>%
  drop_na(age, salary)  # age ã¾ãŸã¯ salary ãŒæ¬ æã—ã¦ã„ã‚‹è¡Œã‚’å‰Šé™¤</code></pre>

            <h3>æ¬ æå€¤ã®è£œå®Œ</h3>
            <pre><code># å¹³å‡å€¤ã§è£œå®Œ
employee_data <- employee_data %>%
  mutate(salary = if_else(is.na(salary), mean(salary, na.rm = TRUE), salary))

# ä¸­å¤®å€¤ã§è£œå®Œï¼ˆå¤–ã‚Œå€¤ã®å½±éŸ¿ã‚’å—ã‘ã«ãã„ï¼‰
employee_data <- employee_data %>%
  mutate(age = if_else(is.na(age), median(age, na.rm = TRUE), age))

# å‰ã®å€¤ã§è£œå®Œï¼ˆæ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®å ´åˆï¼‰
employee_data <- employee_data %>%
  arrange(join_date) %>%
  fill(department, .direction = "down")

# éƒ¨ç½²ã”ã¨ã®å¹³å‡å€¤ã§è£œå®Œ
employee_data <- employee_data %>%
  group_by(department) %>%
  mutate(salary = if_else(is.na(salary), mean(salary, na.rm = TRUE), salary)) %>%
  ungroup()</code></pre>

            <h2>ã‚¹ãƒ†ãƒƒãƒ—4ï¼šå¤–ã‚Œå€¤ã®å‡¦ç†</h2>

            <h3>å¤–ã‚Œå€¤ã®æ¤œå‡ºï¼ˆç®±ã²ã’å›³ï¼‰</h3>
            <pre><code># å¹´é½¢ã®ç®±ã²ã’å›³
ggplot(employee_data, aes(y = age)) +
  geom_boxplot() +
  labs(title = "å¹´é½¢ã®åˆ†å¸ƒ")

# IQRï¼ˆå››åˆ†ä½ç¯„å›²ï¼‰ã§å¤–ã‚Œå€¤ã‚’æ¤œå‡º
Q1 <- quantile(employee_data$age, 0.25, na.rm = TRUE)
Q3 <- quantile(employee_data$age, 0.75, na.rm = TRUE)
IQR <- Q3 - Q1

# å¤–ã‚Œå€¤ã®ç¯„å›²
lower_bound <- Q1 - 1.5 * IQR
upper_bound <- Q3 + 1.5 * IQR

# å¤–ã‚Œå€¤ã‚’å«ã‚€è¡Œã‚’ç¢ºèª
outliers <- employee_data %>%
  filter(age < lower_bound | age > upper_bound)

print(outliers)
# å¹´é½¢999æ­³ã®ãƒ‡ãƒ¼ã‚¿ãŒæ¤œå‡ºã•ã‚Œã‚‹</code></pre>

            <h3>å¤–ã‚Œå€¤ã®å‡¦ç†</h3>
            <pre><code># æ–¹æ³•1ï¼šå¤–ã‚Œå€¤ã‚’å‰Šé™¤
employee_data_clean <- employee_data %>%
  filter(age >= lower_bound & age <= upper_bound)

# æ–¹æ³•2ï¼šå¤–ã‚Œå€¤ã‚’ä¸Šä¸‹é™å€¤ã§ç½®ãæ›ãˆï¼ˆWinsorizationï¼‰
employee_data <- employee_data %>%
  mutate(age = case_when(
    age < lower_bound ~ lower_bound,
    age > upper_bound ~ upper_bound,
    TRUE ~ age
  ))

# æ–¹æ³•3ï¼šå¤–ã‚Œå€¤ã‚’NAã«ç½®ãæ›ãˆã¦ã€å¾Œã§è£œå®Œ
employee_data <- employee_data %>%
  mutate(age = if_else(age < 18 | age > 70, NA_real_, age))</code></pre>

            <h2>ã‚¹ãƒ†ãƒƒãƒ—5ï¼šãƒ‡ãƒ¼ã‚¿å‹ã®å¤‰æ›</h2>

            <h3>æ–‡å­—åˆ—â†’æ•°å€¤</h3>
            <pre><code># employee_id ã‚’æ•°å€¤å‹ã«å¤‰æ›
employee_data <- employee_data %>%
  mutate(employee_id = as.numeric(employee_id))

# ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®æ•°å€¤æ–‡å­—åˆ—ã‚’æ•°å€¤ã«å¤‰æ›
employee_data <- employee_data %>%
  mutate(salary = as.numeric(str_remove_all(salary, ",")))

# ä¾‹: "5,000,000" â†’ 5000000</code></pre>

            <h3>æ–‡å­—åˆ—â†’æ—¥ä»˜</h3>
            <pre><code># lubridateãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨
library(lubridate)

# æ§˜ã€…ãªæ—¥ä»˜å½¢å¼ã‚’çµ±ä¸€
employee_data <- employee_data %>%
  mutate(join_date = ymd(join_date))

# æ—¥ä»˜ã®è¦ç´ ã‚’æŠ½å‡º
employee_data <- employee_data %>%
  mutate(
    join_year = year(join_date),
    join_month = month(join_date),
    join_day = day(join_date)
  )</code></pre>

            <h3>æ–‡å­—åˆ—â†’ã‚«ãƒ†ã‚´ãƒªå¤‰æ•°ï¼ˆfactorï¼‰</h3>
            <pre><code># department ã‚’ factor å‹ã«å¤‰æ›
employee_data <- employee_data %>%
  mutate(department = factor(department))

# é †åºä»˜ãfactorï¼ˆè©•ä¾¡ãªã©ï¼‰
employee_data <- employee_data %>%
  mutate(performance = factor(
    performance,
    levels = c("C", "B", "A", "S"),
    ordered = TRUE
  ))</code></pre>

            <h2>ã‚¹ãƒ†ãƒƒãƒ—6ï¼šè¡¨è¨˜ã‚†ã‚Œã®ä¿®æ­£</h2>

            <h3>éƒ¨ç½²åã®çµ±ä¸€</h3>
            <pre><code># ã€Œé–‹ç™ºã€ã‚’ã€Œé–‹ç™ºéƒ¨ã€ã«çµ±ä¸€
employee_data <- employee_data %>%
  mutate(department = case_when(
    department == "é–‹ç™º" ~ "é–‹ç™ºéƒ¨",
    department == "å–¶æ¥­" ~ "å–¶æ¥­éƒ¨",
    department == "äººäº‹" ~ "äººäº‹éƒ¨",
    TRUE ~ department
  ))

# ã¾ãŸã¯ str_replace() ã‚’ä½¿ç”¨
employee_data <- employee_data %>%
  mutate(department = str_replace(department, "^(\\w+)$", "\\1éƒ¨"))</code></pre>

            <h3>ç©ºç™½ã®å‰Šé™¤</h3>
            <pre><code># å‰å¾Œã®ç©ºç™½ã‚’å‰Šé™¤
employee_data <- employee_data %>%
  mutate(across(where(is.character), str_trim))

# å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã‚‚å‰Šé™¤
employee_data <- employee_data %>%
  mutate(across(where(is.character), ~str_replace_all(., "[ ã€€]+", "")))</code></pre>

            <h3>å¤§æ–‡å­—ãƒ»å°æ–‡å­—ã®çµ±ä¸€</h3>
            <pre><code># å…¨ã¦å°æ–‡å­—ã«å¤‰æ›
employee_data <- employee_data %>%
  mutate(email = str_to_lower(email))

# å§“åã‚’çµ±ä¸€ï¼ˆå§“ã¯å¤§æ–‡å­—ã€åã¯å°æ–‡å­—ï¼‰
employee_data <- employee_data %>%
  mutate(name = str_to_title(name))</code></pre>

            <h2>ã‚¹ãƒ†ãƒƒãƒ—7ï¼šãƒ‡ãƒ¼ã‚¿å¤‰æ›ã¨é›†ç´„</h2>

            <h3>æ–°ã—ã„åˆ—ã®è¿½åŠ </h3>
            <pre><code># å‹¤ç¶šå¹´æ•°ã‚’è¨ˆç®—
employee_data <- employee_data %>%
  mutate(tenure_years = as.numeric(difftime(Sys.Date(), join_date, units = "days")) / 365.25)

# å¹´é½¢å±¤ã‚’ä½œæˆ
employee_data <- employee_data %>%
  mutate(age_group = case_when(
    age < 30 ~ "20ä»£",
    age < 40 ~ "30ä»£",
    age < 50 ~ "40ä»£",
    TRUE ~ "50ä»£ä»¥ä¸Š"
  ))

# çµ¦ä¸ã‚’ä¸‡å††å˜ä½ã«å¤‰æ›
employee_data <- employee_data %>%
  mutate(salary_man = salary / 10000)</code></pre>

            <h3>æ¡ä»¶ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</h3>
            <pre><code># 30æ­³ä»¥ä¸Šã‹ã¤å–¶æ¥­éƒ¨ã®ç¤¾å“¡
filtered_data <- employee_data %>%
  filter(age >= 30 & department == "å–¶æ¥­éƒ¨")

# çµ¦ä¸ãŒä¸Šä½10%ã®ç¤¾å“¡
top10_salary <- employee_data %>%
  filter(salary >= quantile(salary, 0.9, na.rm = TRUE))</code></pre>

            <h3>ãƒ‡ãƒ¼ã‚¿ã®é›†ç´„</h3>
            <pre><code># éƒ¨ç½²åˆ¥ã®å¹³å‡çµ¦ä¸
dept_salary <- employee_data %>%
  group_by(department) %>%
  summarise(
    count = n(),
    avg_salary = mean(salary, na.rm = TRUE),
    median_salary = median(salary, na.rm = TRUE),
    sd_salary = sd(salary, na.rm = TRUE)
  )</code></pre>

            <h2>å®Ÿè·µä¾‹ï¼šäººäº‹ãƒ‡ãƒ¼ã‚¿ã®å®Œå…¨ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°</h2>

            <pre><code># 1. ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
employee_data <- read_csv("employee_data.csv")

# 2. ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ä¸€æ°—ã«ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°
employee_cleaned <- employee_data %>%
  # é‡è¤‡å‰Šé™¤
  distinct(employee_id, .keep_all = TRUE) %>%
  # å‹å¤‰æ›
  mutate(
    employee_id = as.numeric(employee_id),
    join_date = ymd(join_date),
    department = factor(department)
  ) %>%
  # è¡¨è¨˜ã‚†ã‚Œä¿®æ­£
  mutate(across(where(is.character), str_trim)) %>%
  mutate(department = case_when(
    department %in% c("é–‹ç™º", "dev") ~ "é–‹ç™ºéƒ¨",
    department %in% c("å–¶æ¥­", "sales") ~ "å–¶æ¥­éƒ¨",
    TRUE ~ department
  )) %>%
  # å¤–ã‚Œå€¤é™¤å¤–ï¼ˆå¹´é½¢18ã€œ70æ­³ï¼‰
  filter(age >= 18 & age <= 70) %>%
  # æ¬ æå€¤è£œå®Œ
  group_by(department) %>%
  mutate(salary = if_else(is.na(salary), median(salary, na.rm = TRUE), salary)) %>%
  ungroup() %>%
  mutate(age = if_else(is.na(age), median(age, na.rm = TRUE), age)) %>%
  # æ–°ã—ã„åˆ—è¿½åŠ 
  mutate(
    tenure_years = as.numeric(difftime(Sys.Date(), join_date, units = "days")) / 365.25,
    age_group = case_when(
      age < 30 ~ "20ä»£",
      age < 40 ~ "30ä»£",
      age < 50 ~ "40ä»£",
      TRUE ~ "50ä»£ä»¥ä¸Š"
    )
  ) %>%
  # å¿…è¦ãªåˆ—ã®ã¿é¸æŠ
  select(employee_id, name, age, age_group, department, salary, join_date, tenure_years)

# 3. ç¢ºèª
glimpse(employee_cleaned)
summary(employee_cleaned)

# 4. ã‚¯ãƒªãƒ¼ãƒ³ãªãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
write_csv(employee_cleaned, "employee_cleaned.csv")</code></pre>

            <h2>ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h2>

            <h3>1. å…ƒãƒ‡ãƒ¼ã‚¿ã¯æ®‹ã™</h3>
            <pre><code># æ‚ªã„ä¾‹ï¼šå…ƒãƒ‡ãƒ¼ã‚¿ã‚’ä¸Šæ›¸ã
employee_data <- employee_data %>% filter(age >= 18)

# è‰¯ã„ä¾‹ï¼šæ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ä¿å­˜
employee_cleaned <- employee_data %>% filter(age >= 18)</code></pre>

            <h3>2. å‡¦ç†ã‚’è¨˜éŒ²ã™ã‚‹</h3>
            <pre><code># Rã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å…¨ã¦ã®å‡¦ç†ã‚’è¨˜éŒ²
# å†ç¾å¯èƒ½ãªå½¢ã§ä¿å­˜

# ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°å‰ã®ãƒ‡ãƒ¼ã‚¿æ¦‚è¦
cat("Before cleaning:\n")
print(summary(employee_data))

# ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°
employee_cleaned <- employee_data %>%
  # ... ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°å‡¦ç†

# ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°å¾Œã®ãƒ‡ãƒ¼ã‚¿æ¦‚è¦
cat("\nAfter cleaning:\n")
print(summary(employee_cleaned))</code></pre>

            <h3>3. ãƒ‡ãƒ¼ã‚¿å“è³ªãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆ</h3>
            <pre><code># skimr ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§è©³ç´°ãªãƒ¬ãƒãƒ¼ãƒˆ
library(skimr)

skim(employee_data)  # ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°å‰
skim(employee_cleaned)  # ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°å¾Œ

# å‡ºåŠ›:
# ãƒ‡ãƒ¼ã‚¿å‹ã€æ¬ æå€¤ã€çµ±è¨ˆé‡ã€ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãªã©ã‚’è‡ªå‹•è¡¨ç¤º</code></pre>

            <h2>ã¾ã¨ã‚</h2>

            <h3>ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã®æµã‚Œ</h3>
            <ol>
                <li><strong>ãƒ‡ãƒ¼ã‚¿ç¢ºèª</strong>ï¼šæ§‹é€ ã€æ¬ æå€¤ã€çµ±è¨ˆé‡</li>
                <li><strong>é‡è¤‡å‰Šé™¤</strong>ï¼šdistinct()</li>
                <li><strong>æ¬ æå€¤å‡¦ç†</strong>ï¼šdrop_na(), è£œå®Œ</li>
                <li><strong>å¤–ã‚Œå€¤å‡¦ç†</strong>ï¼šIQRã§æ¤œå‡ºã€å‰Šé™¤ã¾ãŸã¯ç½®æ›</li>
                <li><strong>å‹å¤‰æ›</strong>ï¼šas.numeric(), ymd(), factor()</li>
                <li><strong>è¡¨è¨˜ã‚†ã‚Œä¿®æ­£</strong>ï¼šcase_when(), str_replace()</li>
                <li><strong>ãƒ‡ãƒ¼ã‚¿å¤‰æ›</strong>ï¼šæ–°ã—ã„åˆ—è¿½åŠ ã€é›†ç´„</li>
            </ol>

            <h3>ã‚ˆãä½¿ã†é–¢æ•°ã¾ã¨ã‚</h3>
            <table style="width:100%; border-collapse: collapse; margin: 1.5rem 0;">
                <thead>
                    <tr style="background-color: #f3f4f6;">
                        <th style="border: 1px solid #d1d5db; padding: 0.75rem;">å‡¦ç†</th>
                        <th style="border: 1px solid #d1d5db; padding: 0.75rem;">é–¢æ•°</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">é‡è¤‡å‰Šé™¤</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">distinct()</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">æ¬ æå€¤å‰Šé™¤</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">drop_na()</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">æ¬ æå€¤è£œå®Œ</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">if_else(), fill()</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">æ¡ä»¶åˆ†å²</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">case_when()</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">æ–‡å­—åˆ—æ“ä½œ</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">str_trim(), str_replace()</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">æ—¥ä»˜å¤‰æ›</td>
                        <td style="border: 1px solid #d1d5db; padding: 0.75rem;">ymd(), year(), month()</td>
                    </tr>
                </tbody>
            </table>

            <p>ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã¯åœ°å‘³ã§ã™ãŒã€åˆ†æã®ç²¾åº¦ã‚’å·¦å³ã™ã‚‹æœ€é‡è¦å·¥ç¨‹ã§ã™ã€‚Tidyverseã‚’ä½¿ãˆã°ã€åŠ¹ç‡çš„ã‹ã¤å†ç¾å¯èƒ½ãªå½¢ã§ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ã§ãã¾ã™ã€‚ãœã²ã€è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã§è©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼</p>

            <div class="related-articles">
                <h3>é–¢é€£è¨˜äº‹</h3>
                <ul>
                    <li><a href="r-tidyverse-intro.html">Rè¨€èªã¨Tidyverseã§å§‹ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿åˆ†æå…¥é–€</a></li>
                    <li><a href="ggplot2-data-visualization.html">ggplot2ã§å§‹ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–</a></li>
                    <li><a href="sharoushi-skill-utilization.html">ç¤¾åŠ´å£«è³‡æ ¼ã‚’æœ€å¤§é™æ´»ç”¨ã™ã‚‹5ã¤ã®æ–¹æ³•</a></li>
                </ul>
            </div>
        </article>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="../index.html">ãƒ›ãƒ¼ãƒ </a>
                <a href="../articles.html">è¨˜äº‹ä¸€è¦§</a>
                <a href="../about.html">é‹å–¶è€…æƒ…å ±</a>
                <a href="../privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
                <a href="../contact.html">ãŠå•ã„åˆã‚ã›</a>
            </div>
            <p>&copy; 2025 MechaToraã®ãƒ–ãƒ­ã‚°. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>